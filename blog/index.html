<!DOCTYPE html>
<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <title>Blog Index</title>
    <link rel="shortcut icon" href="../favicon.png" type="image/x-icon">
    <link rel="icon" href="./favicon.png" type="image/x-icon">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Bitcount+Single:wght@100..900&display=swap" rel="stylesheet">
    <link href="../style/styles.css" rel="stylesheet">
</head>

<body></body>
<script src="../style/fade.js"></script>
<canvas id="res-canvas" aria-hidden="true"></canvas>
<script type="module" src="../style/perlin.js"></script>
<a href="https://rrodrickk.github.io/" class="back-button">‚Üê</a>
<div class="container-blog-index">
    <div class="header">
        <h1 class="heading">Blog Index</h1>
        <div class="divider"></div>
    </div>
    <table>
        <thead>
            <tr>
                <th style="width: 60%">Filename</th>
                <th style="width: 15%">Size</th>
                <th style="width: 25%">Last Modified</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td>
                    <a class="guide-text" href="../" class="parent">
                        <span class="folder-icon">üìÅ</span> ..
                    </a>
                </td>
                <td>-</td>
                <td>-</td>
            </tr>
            <tr>
                <td>
                    <a class="guide-text" href="study-method.html" class="post-link">
                        <span>üìÑ</span> study-method.html
                    </a>
                    <button class="preview-btn" data-url="study-method.html" aria-label="Preview study method">‚¨áÔ∏è</button>
                    <div class="preview-content" style="display: none;">
                        <p class="preview-text"></p>
                    </div>
                </td>
                <td>4.6 kB</td>
                <td>29-Jul-2025 19:52</td>
            </tr>
            <tr>
                <td>
                    <a class="guide-text" href="eduroam.html" class="post-link">
                        <span>üìÑ</span> eduroam.html
                    </a>
                    <button class="preview-btn" data-url="eduroam.html" aria-label="Preview eduroam">‚¨áÔ∏è</button>
                    <div class="preview-content" style="display: none;">
                        <p class="preview-text"></p>
                    </div>
                </td>
                <td>4.0 kB</td>
                <td>25-Jul-2025 10:14</td>
            </tr>
        </tbody>
    </table>
</div>
<script>
    document.querySelectorAll('.preview-btn').forEach(button => {
        button.addEventListener('click', async () => {
            const url = button.getAttribute('data-url');
            const previewDiv = button.nextElementSibling; // .preview-content div
            const previewText = previewDiv.querySelector('.preview-text');

            // Toggle preview visibility
            if (previewDiv.style.display === 'block') {
                previewDiv.style.display = 'none';
                return;
            }

            try {
                const response = await fetch(url);
                if (!response.ok) throw new Error('Network response was not ok');

                const text = await response.text();

                // Extract first paragraph from the fetched HTML
                const parser = new DOMParser();
                const doc = parser.parseFromString(text, 'text/html');
                const firstParagraph = doc.querySelector('p');

                previewText.textContent = firstParagraph ? firstParagraph.textContent : 'No preview available.';

                // Show the preview
                previewDiv.style.display = 'block';
            } catch (error) {
                previewText.textContent = 'Error loading preview.';
                previewDiv.style.display = 'block';
                console.error('Failed to fetch preview:', error);
            }
        });
    });
</script>

</body>

</html>